---
layout: layouts/base.njk
permalink: /login.html
title: Log In
---

<main class="login-container">
  <h1>Sign In</h1>
  <form id="login-form">
    <label>
      ✉️ Email
      <input type="email" id="email" required />
    </label>
    <label>
      🔒 Password
      <input type="password" id="password" required />
    </label>
    <button type="submit">Log In</button>
  </form>
  <div id="message"></div>
</main>

  <script>
  const supabase = window.supabase;
  document.getElementById('login-form').addEventListener('submit', async e => {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });
    if (error) {
      document.getElementById('message').textContent = error.message;
    } else {
      // on success, redirect back to your main page
      window.location.href = '/';
    }
  });

    // If user is already signed in, skip straight to /
    supabase.auth.getSession().then(({ data: { session } }) => {
    if (session) window.location.href = '/';
  });
</script>
